"""
궁합 분석용 물상론(物象論) 데이터베이스

각 십신의 길흉에 따른 구체적 물상(사건/상황)을 정의.
Gemini 프롬프트에서 추상적인 해석 대신 구체적 일상 예시를 생성하도록 유도.
"""

# ============================================================
# 십신별 물상론 (MUSANG_DATABASE)
# ============================================================
# 각 십신이 길할 때/흉할 때 나타나는 구체적 사건/상황

MUSANG_DATABASE = {
    '비견': {
        '길': {
            'events': [
                '친구와 동업하여 성공',
                '형제/자매와 협력하여 문제 해결',
                '동료와 함께 프로젝트 완수',
                '같은 뜻을 가진 사람을 만나 동지가 됨',
            ],
            'relationship': '서로 대등한 관계에서 시너지가 발생함',
            'advice': '함께 할 때 더 강해지는 관계',
        },
        '흉': {
            'events': [
                '재산을 두고 형제간 다툼',
                '친구에게 배신당함',
                '동업자와 이익 분배로 갈등',
                '경쟁자로 인해 기회를 잃음',
            ],
            'relationship': '서로 경쟁하며 소모적 관계가 됨',
            'advice': '역할 분담과 경계를 명확히 해야 함',
        },
    },
    '겁재': {
        '길': {
            'events': [
                '강력한 추진력으로 목표 달성',
                '위기 상황에서 과감한 결단',
                '투자에서 대박',
                '새로운 도전에서 승리',
            ],
            'relationship': '서로의 야망을 자극하며 성장',
            'advice': '열정을 공유할 때 폭발적 에너지',
        },
        '흉': {
            'events': [
                '충동적 결정으로 손해',
                '투기성 투자 실패',
                '다툼으로 인한 관계 파탄',
                '강압적 태도로 주변 이탈',
            ],
            'relationship': '서로 상처 주는 관계가 될 수 있음',
            'advice': '감정 조절과 인내심이 필요',
        },
    },
    '식신': {
        '길': {
            'events': [
                '취미 생활로 스트레스 해소',
                '맛집 탐방, 여행으로 행복',
                '창작 활동에서 인정받음',
                '아이디어로 문제 해결',
            ],
            'relationship': '함께 있으면 즐겁고 편안함',
            'advice': '서로의 취향을 공유하며 행복 증가',
        },
        '흉': {
            'events': [
                '과식, 과음으로 건강 문제',
                '낭비벽으로 경제적 어려움',
                '쾌락 추구로 책임 회피',
                '게으름으로 기회 상실',
            ],
            'relationship': '서로 타락시키는 관계가 될 수 있음',
            'advice': '절제와 균형이 필요',
        },
    },
    '상관': {
        '길': {
            'events': [
                '창의적 아이디어로 주목받음',
                '솔직한 표현으로 오해 해소',
                '전문 기술로 인정받음',
                '혁신적 방법으로 문제 해결',
            ],
            'relationship': '서로에게 영감을 주는 관계',
            'advice': '창의성을 응원해주면 시너지 발생',
        },
        '흉': {
            'events': [
                '직설적 발언으로 관계 악화',
                '상사/윗사람과 충돌',
                '규칙 무시로 불이익',
                '지나친 자기 표현으로 따돌림',
            ],
            'relationship': '서로 비판하며 갈등 증폭',
            'advice': '말하기 전에 한 번 더 생각',
        },
    },
    '편재': {
        '길': {
            'events': [
                '사업에서 큰 수익',
                '부동산 투자 성공',
                '새로운 재테크 발견',
                '폭넓은 인맥으로 기회 획득',
            ],
            'relationship': '함께 부를 쌓아가는 동반자',
            'advice': '재물에 대한 가치관 공유 중요',
        },
        '흉': {
            'events': [
                '투기 실패로 큰 손실',
                '보증으로 인한 피해',
                '사기를 당함',
                '돈 문제로 관계 파탄',
            ],
            'relationship': '재물로 인한 갈등 가능성',
            'advice': '투자는 신중하게, 보증은 피해야',
        },
    },
    '정재': {
        '길': {
            'events': [
                '안정적 수입 확보',
                '저축으로 목돈 마련',
                '꾸준한 노력으로 승진',
                '신뢰받는 직원으로 인정',
            ],
            'relationship': '안정적이고 신뢰할 수 있는 관계',
            'advice': '함께 미래를 계획하기 좋은 파트너',
        },
        '흉': {
            'events': [
                '고정관념에 갇혀 기회 놓침',
                '지나친 절약으로 삶의 질 저하',
                '융통성 부족으로 갈등',
                '변화 거부로 도태',
            ],
            'relationship': '너무 보수적이면 답답해질 수 있음',
            'advice': '때로는 모험도 필요',
        },
    },
    '편관': {
        '길': {
            'events': [
                '강력한 리더십으로 조직 이끔',
                '위기 상황에서 냉철한 판단',
                '규율로 질서 확립',
                '책임감으로 신뢰 획득',
            ],
            'relationship': '서로에게 든든한 버팀목',
            'advice': '명확한 역할 분담이 관계에 도움',
        },
        '흉': {
            'events': [
                '권위적 태도로 반발',
                '강압으로 관계 악화',
                '스트레스로 건강 문제',
                '완벽주의로 번아웃',
            ],
            'relationship': '지배-피지배 관계가 될 위험',
            'advice': '통제보다 존중이 필요',
        },
    },
    '정관': {
        '길': {
            'events': [
                '공무원/대기업 취업 성공',
                '법적 분쟁에서 승리',
                '사회적 명예 획득',
                '원칙을 지켜 존경받음',
            ],
            'relationship': '서로 존중하는 성숙한 관계',
            'advice': '정정당당함이 신뢰의 기반',
        },
        '흉': {
            'events': [
                '법적 문제에 휘말림',
                '융통성 없어 기회 놓침',
                '지나친 규칙으로 갈등',
                '권위에 눌려 위축',
            ],
            'relationship': '격식에 얽매여 진정한 소통 어려움',
            'advice': '규칙보다 마음이 먼저',
        },
    },
    '편인': {
        '길': {
            'events': [
                '독창적 아이디어로 성공',
                '특이한 분야에서 전문가',
                '영적/철학적 깨달음',
                '비주류 취미로 행복',
            ],
            'relationship': '서로의 독특함을 인정하는 관계',
            'advice': '평범하지 않아도 괜찮아',
        },
        '흉': {
            'events': [
                '현실과 동떨어진 생각',
                '고립되어 외로움',
                '의심으로 관계 악화',
                '불안정한 정신 상태',
            ],
            'relationship': '서로를 이해하기 어려울 수 있음',
            'advice': '현실 감각을 잃지 말아야',
        },
    },
    '정인': {
        '길': {
            'events': [
                '학업에서 좋은 성적',
                '자격증 취득 성공',
                '어머니/스승의 도움',
                '문서운/계약운 상승',
            ],
            'relationship': '서로 성장시키는 관계',
            'advice': '함께 배우고 발전하면 좋음',
        },
        '흉': {
            'events': [
                '과보호로 자립 어려움',
                '이론만 앞서고 실행 부족',
                '문서/계약 문제',
                '생각이 많아 우유부단',
            ],
            'relationship': '한쪽이 너무 의존할 수 있음',
            'advice': '독립심과 실행력을 키워야',
        },
    },
}


# ============================================================
# 십신 궁합 물상 (TENSHIN_COMPATIBILITY_MUSANG)
# ============================================================
# A가 B에게 특정 십신이 될 때의 관계 역학

TENSHIN_COMPATIBILITY_MUSANG = {
    '비견-비견': {
        'dynamics': '동지이자 경쟁자',
        'positive': '같은 목표를 향해 함께 달릴 수 있는 관계',
        'negative': '이익 앞에서 갈라질 수 있음',
        'example': '창업 파트너로 시작했다가 분쟁이 생기는 경우',
        'advice': '역할 분담을 명확히 하고 경쟁보다 협력에 집중',
    },
    '비견-겁재': {
        'dynamics': '서로를 자극하는 관계',
        'positive': '함께 있으면 더 과감해질 수 있음',
        'negative': '충동적 결정을 부추길 수 있음',
        'example': '둘이 만나면 무모한 도전을 하게 되는 경우',
        'advice': '서로 제어해주는 역할도 필요',
    },
    '식신-상관': {
        'dynamics': '창의적 시너지',
        'positive': '서로의 아이디어가 더해져 새로운 것 창조',
        'negative': '현실성 없는 공상에 빠질 수 있음',
        'example': '예술 작업을 함께하면 좋은 결과물이 나옴',
        'advice': '실행력을 갖춘 조력자가 필요할 수 있음',
    },
    '정재-정인': {
        'dynamics': '안정적인 부부 관계 유형',
        'positive': '서로 돌보며 가정을 잘 꾸려감',
        'negative': '변화가 적어 권태기가 올 수 있음',
        'example': '결혼 후 안정적이지만 낭만이 줄어드는 경우',
        'advice': '가끔은 일상을 벗어난 이벤트가 필요',
    },
    '편관-식신': {
        'dynamics': '긴장과 이완의 조화',
        'positive': '한쪽은 밀어붙이고 한쪽은 완화해주는 균형',
        'negative': '서로 다른 템포로 답답할 수 있음',
        'example': '일과 휴식의 밸런스를 잘 맞추는 커플',
        'advice': '각자의 리듬을 존중해야 함',
    },
    '상관-정관': {
        'dynamics': '혁신과 전통의 충돌',
        'positive': '서로 다른 관점에서 배울 수 있음',
        'negative': '가치관 충돌이 빈번할 수 있음',
        'example': '자유로운 예술가와 보수적 공무원의 만남',
        'advice': '차이를 인정하고 존중하는 자세가 중요',
    },
    '편재-겁재': {
        'dynamics': '투기적 성향 강화',
        'positive': '함께 큰 기회를 잡을 수 있음',
        'negative': '함께 크게 잃을 수도 있음',
        'example': '둘이 함께 투자했다가 대박 또는 파산',
        'advice': '리스크 관리를 철저히 해야',
    },
    '정인-편인': {
        'dynamics': '지적 동반자',
        'positive': '깊은 대화로 정신적 교류가 풍부함',
        'negative': '현실적 문제 해결에 약할 수 있음',
        'example': '철학 토론은 잘 하지만 집안일은 미룸',
        'advice': '실용적인 역할을 맡을 사람이 필요',
    },
}


# ============================================================
# 충(冲) 물상 강화 데이터 (Step 6용)
# ============================================================
# 6충별 구체적 갈등 상황과 해결책

CHUNG_MUSANG = {
    '子午冲': {
        'hanja': '子午冲',
        'korean': '자오충',
        'meaning': '물과 불의 충돌',
        'emotion': '내면의 갈등, 감정과 이성의 대립',
        'conflict_scene': [
            '감정적으로 결정해야 할 때 이성이 개입',
            '직관과 논리가 충돌하는 상황',
            '집안일(子)과 사회활동(午)의 균형 갈등',
        ],
        'body': '심장, 신장, 혈액순환',
        'resolution': '감정을 인정하되 이성적 판단을 존중. 중간 지점을 찾는 연습이 필요.',
        'advice_for_couple': '한 사람은 감정으로, 한 사람은 이성으로 접근해 갈등할 수 있음. 서로의 방식을 비난하지 말고 보완점으로 활용.',
    },
    '丑未冲': {
        'hanja': '丑未冲',
        'korean': '축미충',
        'meaning': '습한 땅과 마른 땅의 충돌',
        'emotion': '완고함의 충돌, 서로 양보하지 않음',
        'conflict_scene': [
            '재산 분배 문제로 갈등',
            '땅/부동산 관련 분쟁',
            '고집 대 고집의 팽팽한 대립',
        ],
        'body': '소화기관, 비장, 위장',
        'resolution': '둘 다 한 발씩 물러서야 해결됨. 제3자의 중재가 효과적.',
        'advice_for_couple': '둘 다 고집이 세서 작은 일에도 대치할 수 있음. 승패를 가리려 하지 말고 타협점을 찾아야.',
    },
    '寅申冲': {
        'hanja': '寅申冲',
        'korean': '인신충',
        'meaning': '나무와 쇠의 충돌',
        'emotion': '목표 충돌, 방향성 다툼',
        'conflict_scene': [
            '커리어 방향에 대한 의견 충돌',
            '이사/이동 관련 결정 갈등',
            '새로운 시작 vs 현상 유지',
        ],
        'body': '간, 폐, 신경계',
        'resolution': '각자의 목표를 존중하되 공동의 비전을 찾아야.',
        'advice_for_couple': '인생 방향이 다르면 함께 가기 어려움. 장기 목표를 맞춰보는 대화가 필요.',
    },
    '卯酉冲': {
        'hanja': '卯酉冲',
        'korean': '묘유충',
        'meaning': '나무와 쇠의 충돌 (섬세한)',
        'emotion': '소통 단절, 오해의 축적',
        'conflict_scene': [
            '말한 의도와 받아들이는 의미가 달라 다툼',
            '사소한 말 한마디에 상처받음',
            '연락 두절, 냉전 상태',
        ],
        'body': '간, 폐, 기관지',
        'resolution': '말하는 방식과 듣는 자세 모두 개선 필요.',
        'advice_for_couple': '말투가 날카로워지기 쉬움. 대화 전 감정 정리를 하고, 상대방 말에 숨은 의도를 파악하려 노력.',
    },
    '辰戌冲': {
        'hanja': '辰戌冲',
        'korean': '진술충',
        'meaning': '땅의 충돌 (고묘충)',
        'emotion': '과거와 현재의 충돌, 원칙 대립',
        'conflict_scene': [
            '가치관/신념의 충돌',
            '집안 어른들과의 갈등',
            '전통 vs 혁신 논쟁',
        ],
        'body': '비위, 피부, 근육',
        'resolution': '서로의 배경과 경험을 이해하려는 노력이 필요.',
        'advice_for_couple': '자라온 환경 차이로 갈등할 수 있음. 서로의 가정문화를 존중하고 새로운 규칙을 함께 만들어야.',
    },
    '巳亥冲': {
        'hanja': '巳亥冲',
        'korean': '사해충',
        'meaning': '불과 물의 충돌',
        'emotion': '이상과 현실의 괴리',
        'conflict_scene': [
            '꿈과 현실 사이에서 갈팡질팡',
            '해외/먼 곳 관련 결정 갈등',
            '믿음/종교 문제로 충돌',
        ],
        'body': '심장, 신장, 순환계',
        'resolution': '이상을 현실에 맞게 조정하거나, 현실을 이상에 가깝게 바꾸는 노력.',
        'advice_for_couple': '한 명은 현실주의, 한 명은 이상주의라면 맞추기 어려움. 서로의 세계관을 열린 마음으로 들어야.',
    },
}


# ============================================================
# 도화살 물상 (DOHWA_MUSANG)
# ============================================================

DOHWA_MUSANG = {
    '쌍방도화': {
        'description': '두 사람 모두 서로에게 강한 끌림을 느낌',
        'positive': '첫눈에 반하는 운명적 만남, 불꽃 같은 로맨스',
        'negative': '식지 않는 열정이 집착으로 변할 수 있음',
        'advice': '초반의 열정을 오래 유지하려면 서로에게 적당한 거리감도 필요',
    },
    '일방도화': {
        'description': '한 쪽이 더 강하게 끌리는 관계',
        'positive': '적극적으로 다가가는 쪽이 관계를 주도',
        'negative': '끌림의 불균형으로 한쪽이 지칠 수 있음',
        'advice': '받는 쪽도 적극적으로 반응해주어야 균형이 맞음',
    },
    '특별끌림': {
        'description': 'A의 도화지가 B의 지지에 있어 특별한 매력을 느낌',
        'positive': 'B가 A에게 이상형에 가깝게 느껴짐',
        'negative': '실제 모습보다 이상화할 수 있음',
        'advice': '환상과 현실의 차이를 인정하고 있는 그대로의 상대를 봐야',
    },
}


# ============================================================
# 헬퍼 함수
# ============================================================

def get_musang_for_tenshin(tenshin: str, is_positive: bool = True) -> dict:
    """
    특정 십신의 물상 정보 반환

    Args:
        tenshin: 십신명 (예: '정재', '편관')
        is_positive: True면 길한 물상, False면 흉한 물상

    Returns:
        해당 십신의 물상 정보 dict
    """
    data = MUSANG_DATABASE.get(tenshin, {})
    key = '길' if is_positive else '흉'
    return data.get(key, {})


def get_chung_musang(chung_type: str) -> dict:
    """
    특정 충의 물상 정보 반환

    Args:
        chung_type: 충 유형 (예: '子午冲', '卯酉冲')

    Returns:
        해당 충의 물상 정보 dict
    """
    return CHUNG_MUSANG.get(chung_type, {})


def get_compatibility_musang(pair: str) -> dict:
    """
    십신 조합의 궁합 물상 정보 반환

    Args:
        pair: 십신 조합 (예: '비견-겁재', '정재-정인')

    Returns:
        해당 조합의 물상 정보 dict
    """
    return TENSHIN_COMPATIBILITY_MUSANG.get(pair, {})
